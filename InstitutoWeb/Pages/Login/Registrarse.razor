@page "/registrarse"
@inject FirebaseAuthService AuthService
@inject NavigationManager NavigationManager
@inject ILogger<Registrarse> logger


<h3>Registrarse</h3>
<EditForm Model="usuario" OnValidSubmit="Registro">
    <DataAnnotationsValidator />
    <div class="form-group">
        <label for="email">Email</label>
        <InputText class="form-control mb-2" type="text" @bind-Value="usuario.Email" />
    </div>
    <div class="form-group">
        <label for="clave">Contraseña</label>
        <InputText class="form-control mb-2" type="password" @bind-Value="usuario.Password" />
    </div>
    <div class="form-group">
        <label for="nombre">Nombre completo</label>
        <InputText class="form-control mb-2" type="text" @bind-Value="usuario.User" />
    </div>
    <ValidationSummary />
    <button type="submit" class="btn btn-primary">Registrarse</button>
</EditForm>

@code {
    Usuario usuario { get; set; } =new Usuario();

    bool IsAuthenticated { get; set; }=false;

    private async Task Registro()
    {
        var userId = await AuthService.createUserWithEmailAndPassword(usuario.Email, usuario.Password);
        logger.LogInformation($"Usuario creado con el id {userId}");
        NavigationManager.NavigateTo("/login");

    }

}